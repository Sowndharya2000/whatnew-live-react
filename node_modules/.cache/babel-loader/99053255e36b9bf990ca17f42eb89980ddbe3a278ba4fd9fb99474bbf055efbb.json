{"ast":null,"code":"// at top\nimport axios from 'axios';\nimport { useEffect } from 'react';\n\n// inside component\nconst API_BASE = \"http://localhost:5000/api\";\nuseEffect(() => {\n  const fetchJobs = async () => {\n    try {\n      const res = await axios.get(`${API_BASE}/jobs?page=${currentPage}&limit=${jobsPerPage}`);\n      setJobs(res.data.jobs);\n      // update pagination totals if you want:\n      // setTotalPages(res.data.totalPages);\n    } catch (err) {\n      console.error(err);\n      alert('Failed to fetch jobs');\n    }\n  };\n  fetchJobs();\n}, [currentPage]); // refetch when page changes\n\n// posting a job:\nconst handlePostJob = async () => {\n  try {\n    if (!newJob.title || !newJob.description) return alert('Please fill required fields');\n    const res = await axios.post(`${API_BASE}/jobs`, newJob);\n    // optionally refetch or append:\n    setJobs(prev => [res.data, ...prev]);\n    setNewJob({\n      title: \"\",\n      description: \"\",\n      location: \"\",\n      type: \"\",\n      salary: \"\"\n    });\n    alert('Job posted');\n  } catch (err) {\n    console.error(err);\n    alert('Failed to post job');\n  }\n};\n\n// applying with resume:\nconst handleApply = async job => {\n  if (!resume) return alert(\"Please upload a resume first!\");\n  const form = new FormData();\n  form.append('name', 'Candidate Name'); // optionally collect inputs\n  form.append('email', 'candidate@example.com');\n  form.append('resume', resume);\n  try {\n    await axios.post(`${API_BASE}/jobs/${job._id}/apply`, form, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    alert('Applied successfully');\n    setSelectedJob(null);\n    setResume(null);\n  } catch (err) {\n    console.error(err);\n    alert('Apply failed');\n  }\n};","map":{"version":3,"names":["axios","useEffect","API_BASE","fetchJobs","res","get","currentPage","jobsPerPage","setJobs","data","jobs","err","console","error","alert","handlePostJob","newJob","title","description","post","prev","setNewJob","location","type","salary","handleApply","job","resume","form","FormData","append","_id","headers","setSelectedJob","setResume"],"sources":["C:/Users/Admin/Desktop/WhatNew React/whatnew/src/components/DiscoveryJobs.jsx"],"sourcesContent":["// at top\r\nimport axios from 'axios';\r\nimport { useEffect } from 'react';\r\n\r\n// inside component\r\nconst API_BASE = \"http://localhost:5000/api\";\r\n\r\nuseEffect(() => {\r\n  const fetchJobs = async () => {\r\n    try {\r\n      const res = await axios.get(`${API_BASE}/jobs?page=${currentPage}&limit=${jobsPerPage}`);\r\n      setJobs(res.data.jobs);\r\n      // update pagination totals if you want:\r\n      // setTotalPages(res.data.totalPages);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Failed to fetch jobs');\r\n    }\r\n  };\r\n  fetchJobs();\r\n}, [currentPage]); // refetch when page changes\r\n\r\n// posting a job:\r\nconst handlePostJob = async () => {\r\n  try {\r\n    if (!newJob.title || !newJob.description) return alert('Please fill required fields');\r\n    const res = await axios.post(`${API_BASE}/jobs`, newJob);\r\n    // optionally refetch or append:\r\n    setJobs(prev => [res.data, ...prev]);\r\n    setNewJob({ title: \"\", description: \"\", location: \"\", type: \"\", salary: \"\" });\r\n    alert('Job posted');\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert('Failed to post job');\r\n  }\r\n};\r\n\r\n// applying with resume:\r\nconst handleApply = async (job) => {\r\n  if (!resume) return alert(\"Please upload a resume first!\");\r\n  const form = new FormData();\r\n  form.append('name', 'Candidate Name'); // optionally collect inputs\r\n  form.append('email', 'candidate@example.com');\r\n  form.append('resume', resume);\r\n  try {\r\n    await axios.post(`${API_BASE}/jobs/${job._id}/apply`, form, { headers: { 'Content-Type': 'multipart/form-data' } });\r\n    alert('Applied successfully');\r\n    setSelectedJob(null);\r\n    setResume(null);\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert('Apply failed');\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,OAAO;;AAEjC;AACA,MAAMC,QAAQ,GAAG,2BAA2B;AAE5CD,SAAS,CAAC,MAAM;EACd,MAAME,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAC,GAAGH,QAAQ,cAAcI,WAAW,UAAUC,WAAW,EAAE,CAAC;MACxFC,OAAO,CAACJ,GAAG,CAACK,IAAI,CAACC,IAAI,CAAC;MACtB;MACA;IACF,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBG,KAAK,CAAC,sBAAsB,CAAC;IAC/B;EACF,CAAC;EACDX,SAAS,CAAC,CAAC;AACb,CAAC,EAAE,CAACG,WAAW,CAAC,CAAC,CAAC,CAAC;;AAEnB;AACA,MAAMS,aAAa,GAAG,MAAAA,CAAA,KAAY;EAChC,IAAI;IACF,IAAI,CAACC,MAAM,CAACC,KAAK,IAAI,CAACD,MAAM,CAACE,WAAW,EAAE,OAAOJ,KAAK,CAAC,6BAA6B,CAAC;IACrF,MAAMV,GAAG,GAAG,MAAMJ,KAAK,CAACmB,IAAI,CAAC,GAAGjB,QAAQ,OAAO,EAAEc,MAAM,CAAC;IACxD;IACAR,OAAO,CAACY,IAAI,IAAI,CAAChB,GAAG,CAACK,IAAI,EAAE,GAAGW,IAAI,CAAC,CAAC;IACpCC,SAAS,CAAC;MAAEJ,KAAK,EAAE,EAAE;MAAEC,WAAW,EAAE,EAAE;MAAEI,QAAQ,EAAE,EAAE;MAAEC,IAAI,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAG,CAAC,CAAC;IAC7EV,KAAK,CAAC,YAAY,CAAC;EACrB,CAAC,CAAC,OAAOH,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClBG,KAAK,CAAC,oBAAoB,CAAC;EAC7B;AACF,CAAC;;AAED;AACA,MAAMW,WAAW,GAAG,MAAOC,GAAG,IAAK;EACjC,IAAI,CAACC,MAAM,EAAE,OAAOb,KAAK,CAAC,+BAA+B,CAAC;EAC1D,MAAMc,IAAI,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC,CAAC;EACvCF,IAAI,CAACE,MAAM,CAAC,OAAO,EAAE,uBAAuB,CAAC;EAC7CF,IAAI,CAACE,MAAM,CAAC,QAAQ,EAAEH,MAAM,CAAC;EAC7B,IAAI;IACF,MAAM3B,KAAK,CAACmB,IAAI,CAAC,GAAGjB,QAAQ,SAASwB,GAAG,CAACK,GAAG,QAAQ,EAAEH,IAAI,EAAE;MAAEI,OAAO,EAAE;QAAE,cAAc,EAAE;MAAsB;IAAE,CAAC,CAAC;IACnHlB,KAAK,CAAC,sBAAsB,CAAC;IAC7BmB,cAAc,CAAC,IAAI,CAAC;IACpBC,SAAS,CAAC,IAAI,CAAC;EACjB,CAAC,CAAC,OAAOvB,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClBG,KAAK,CAAC,cAAc,CAAC;EACvB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}